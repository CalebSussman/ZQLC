(()=>{var e={};e.id=931,e.ids=[931],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},9319:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>g,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>i});var a=t(482),s=t(9108),o=t(2563),n=t.n(o),l=t(8300),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);t.d(r,d);let i=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,751)),"/workspaces/ZQLC/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,6680)),"/workspaces/ZQLC/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"]}],c=["/workspaces/ZQLC/app/page.tsx"],u="/page",g={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},9473:(e,r,t)=>{Promise.resolve().then(t.bind(t,4302))},4302:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});var a=t(5344),s=t(3729),o=t(8428),n=t(2829),l=t(3313);let d=[{code:"R",name:"Received",description:"Task received and acknowledged"},{code:"D",name:"Delivered",description:"Task delivered or presented"},{code:"F",name:"Filed",description:"Task filed for reference"},{code:"C",name:"Completed",description:"Task fully completed"},{code:"P",name:"Pending",description:"Task pending external action"},{code:"X",name:"Cancelled",description:"Task cancelled"}];function i(){let e=(0,o.useRouter)(),r=(0,s.useRef)(null),[t,i]=(0,s.useState)([]),[c,u]=(0,s.useState)([]),[g,p]=(0,s.useState)([]),[m,b]=(0,s.useState)([]),[x,h]=(0,s.useState)([]),[f,y]=(0,s.useState)(""),[v,k]=(0,s.useState)(null),[N,j]=(0,s.useState)(null),[_,w]=(0,s.useState)(null),[S,C]=(0,s.useState)(null),[$,q]=(0,s.useState)(null),[T,P]=(0,s.useState)(""),[E,F]=(0,s.useState)(""),[L,O]=(0,s.useState)("status"),[D,A]=(0,s.useState)(""),[U,I]=(0,s.useState)(""),[M,R]=(0,s.useState)(""),[G,B]=(0,s.useState)(""),[Q,Z]=(0,s.useState)(!1),[K,J]=(0,s.useState)(null);async function X(){let{data:e}=await n.O.from("universes").select("*").order("display_order");i(e||[]);let{data:r}=await n.O.from("task_details").select("*").order("updated_at",{ascending:!1}).limit(10);h(r||[])}async function z(e){let{data:r}=await n.O.from("phyla").select("*").eq("universe_id",e).order("display_order");u(r||[])}async function H(e){let{data:r}=await n.O.from("families").select("*").eq("phylum_id",e).order("display_order");p(r||[])}async function W(e,r,t){let a=n.O.from("groups_with_counts").select("*").eq("universe_id",e).eq("phylum_id",r);t?a.eq("family_id",t):a.is("family_id",null);let{data:s}=await a.order("group_num");b(s||[])}async function Y(){if(!v||!N||!_||!T||!E||!f){alert("Please complete all required fields");return}let r=new Date,t=r.toISOString().replace("T","_").replace(/[-:]/g,".").substring(0,16),a=`${N.code}${_.code}${S?.code||""}-${T.padStart(2,"0")}.${E.padStart(2,"0")}`.toUpperCase(),s=`${v.code}-${t}=${a}`;try{let{data:t,error:o}=await n.O.from("tasks").insert({code:s,base_code:a,title:f,universe_id:N.id,phylum_id:_.id,family_id:S?.id||null,group_num:parseInt(T),task_num:parseInt(E),priority:3,status:"active",task_timestamp:r.toISOString()}).select().single();if(o)throw o;if(t){await n.O.rpc("create_task_entry",{p_task_id:t.id,p_status_code:v.code,p_note:"Initial entry",p_entry_timestamp:r.toISOString()});let s=new Date,o=(0,l.BT)(s),d=new Date(s.getTime()+6e5),i=(0,l.BT)(d);await n.O.from("calendar_entries").insert({task_code:a,status_code:v.code,work_description:f,date:(0,l.LJ)(s),start_time:o,end_time:i,is_parallel:!1,track_number:1});let{data:c}=await n.O.from("cards").select("id").eq("status","active").single();c&&await n.O.from("task_cards").insert({task_id:t.id,card_id:c.id}),e.push(`/t/${a.toLowerCase()}`)}}catch(e){console.error("Error creating task:",e),alert("Failed to create task")}}return(0,s.useEffect)(()=>{X()},[]),(0,s.useEffect)(()=>{N&&z(N.id)},[N]),(0,s.useEffect)(()=>{_&&(H(_.id),N&&W(N.id,_.id,S?.id))},[_,N,S]),(0,s.useEffect)(()=>{let e=e=>{if(e.target&&"INPUT"===e.target.tagName)return;let r=e.key.toUpperCase();if(!v||"status"===L){let e=d.find(e=>e.code===r);if(e){k(e),A(r),O("universe");return}}if(v&&(!N||"universe"===L)){let e=t.find(e=>e.code===r);if(e){j(e),I(r),O("phylum");return}}if(N&&(!_||"phylum"===L)){let e=c.find(e=>e.code===r);if(e){w(e),R(r),O("family");return}}if(_&&(!S||"family"===L)){let e=g.find(e=>e.code===r);if(e){C(e),B(r),O("group");return}}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[v,N,_,S,L,t,c,g]),a.jsx("div",{className:"min-h-screen bg-[#F8F7F4] dark:bg-[#0A0A0B] p-4 sm:p-8",children:(0,a.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8 border-b-2 border-gray-300 dark:border-gray-700 pb-4",children:[a.jsx("h1",{className:"text-3xl font-mono font-bold text-gray-900 dark:text-gray-100",children:"CREATE NEW TASK"}),a.jsx("div",{className:"mt-2 h-1 w-32 bg-gradient-to-r from-yellow-400 to-yellow-500"})]}),a.jsx("div",{className:"mb-8 bg-[#FFF9C4] dark:bg-[#3D3A2B] p-4 sm:p-6 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 sm:gap-4",children:[a.jsx("input",{ref:r,type:"text",value:f,onChange:e=>y(e.target.value),placeholder:"[TASK NAME]",className:"flex-1 min-w-0 text-lg sm:text-2xl font-mono bg-transparent border-b-2 border-gray-400 dark:border-gray-600 pb-2 focus:outline-none focus:border-blue-600 placeholder-gray-500"}),a.jsx("button",{onClick:Y,disabled:!v||!N||!_||!T||!E||!f,className:"flex-shrink-0 px-3 py-2 sm:px-4 sm:py-2 text-xl sm:text-2xl font-mono font-bold bg-green-600 hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded-lg transition-colors",children:">"})]})}),(0,a.jsxs)("div",{className:"mb-8 bg-white dark:bg-gray-900 p-6 rounded-lg border border-gray-300 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"font-mono text-lg mb-4 flex items-center",children:[a.jsx("span",{className:"text-gray-500",children:"["}),a.jsx("input",{type:"text",value:D||v?.code||"",onChange:e=>{let r=e.target.value.toUpperCase();if(A(r),r){let e=d.find(e=>e.code===r);e&&k(e)}},onFocus:()=>O("status"),onClick:()=>O("status"),className:"w-6 text-purple-600 font-bold bg-transparent border-none focus:outline-none focus:bg-purple-50 dark:focus:bg-purple-900/20 text-center cursor-pointer",placeholder:"S",maxLength:1}),a.jsx("span",{className:"text-gray-500",children:"-"}),a.jsx("input",{type:"text",value:U||N?.code||"",onChange:e=>{let r=e.target.value.toUpperCase();if(I(r),r){let e=t.find(e=>e.code===r);e&&j(e)}},onFocus:()=>O("universe"),onClick:()=>O("universe"),className:"w-6 text-blue-600 bg-transparent border-none focus:outline-none focus:bg-blue-50 dark:focus:bg-blue-900/20 text-center cursor-pointer",placeholder:"U",maxLength:1}),a.jsx("span",{className:"text-gray-500",children:"/"}),a.jsx("input",{type:"text",value:M||_?.code||"",onChange:e=>{let r=e.target.value.toUpperCase();if(R(r),r){let e=c.find(e=>e.code===r);e&&w(e)}},onFocus:()=>O("phylum"),onClick:()=>O("phylum"),className:"w-6 text-blue-600 bg-transparent border-none focus:outline-none focus:bg-blue-50 dark:focus:bg-blue-900/20 text-center cursor-pointer",placeholder:"P",maxLength:1}),a.jsx("span",{className:"text-gray-500",children:"/"}),a.jsx("input",{type:"text",value:G||S?.code||"",onChange:e=>{let r=e.target.value.toUpperCase();if(B(r),r){let e=g.find(e=>e.code===r);e&&C(e)}else C(null)},onFocus:()=>O("family"),onClick:()=>O("family"),className:"w-6 text-blue-600 bg-transparent border-none focus:outline-none focus:bg-blue-50 dark:focus:bg-blue-900/20 text-center cursor-pointer",placeholder:"F",maxLength:1}),a.jsx("span",{className:"text-gray-500",children:"]-"}),a.jsx("input",{type:"text",value:T,onChange:e=>P(e.target.value.replace(/\D/g,"").slice(0,2)),onFocus:()=>O("group"),onClick:()=>O("group"),className:"w-8 text-green-600 bg-transparent border-none focus:outline-none focus:bg-green-50 dark:focus:bg-green-900/20 text-center cursor-pointer",placeholder:"##",maxLength:2}),a.jsx("span",{className:"text-gray-500",children:"."}),a.jsx("input",{type:"text",value:E,onChange:e=>F(e.target.value.replace(/\D/g,"").slice(0,2)),className:"w-8 text-green-600 bg-transparent border-none focus:outline-none focus:bg-green-50 dark:focus:bg-green-900/20 text-center",placeholder:"##",maxLength:2})]}),v&&N&&_&&T&&E&&(0,a.jsxs)("div",{className:"mt-4 p-3 bg-gray-100 dark:bg-gray-800 rounded",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:["Status prefix: ",v.code,"-",new Date().toISOString().replace("T","_").replace(/[-:]/g,".").substring(0,16)]}),(0,a.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:["Core code: ",`${N.code}${_.code}${S?.code||""}-${T.padStart(2,"0")}.${E.padStart(2,"0")}`.toUpperCase()]}),a.jsx("div",{className:"text-sm font-mono font-bold",children:(()=>{if(!v||!N||!_||!T||!E)return"";let e=new Date().toISOString().replace("T","_").replace(/[-:]/g,".").substring(0,16),r=`${N.code}${_.code}${S?.code||""}-${T.padStart(2,"0")}.${E.padStart(2,"0")}`.toUpperCase();return`${v.code}-${e}=${r}`})()})]})]}),(!v||"status"===L)&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-white dark:bg-gray-900 rounded-lg border-2 border-purple-500",children:[a.jsx("h3",{className:"font-mono font-bold mb-4",children:"Select Status:"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:d.map(e=>(0,a.jsxs)("button",{onClick:()=>{k(e),A(e.code),O("universe")},className:`p-4 rounded-lg border-2 transition-all hover:scale-105 font-mono ${v?.code===e.code?"bg-purple-100 dark:bg-purple-900 border-purple-600":"bg-gray-50 dark:bg-gray-800 border-gray-300 dark:border-gray-700 hover:border-purple-400"}`,children:[(0,a.jsxs)("div",{className:"text-xl font-bold text-purple-600 dark:text-purple-400",children:["[",e.code,"]"]}),a.jsx("div",{className:"text-sm mt-1",children:e.name})]},e.code))})]}),v&&(!N||"universe"===L)&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-white dark:bg-gray-900 rounded-lg border-2 border-blue-500",children:[a.jsx("h3",{className:"font-mono font-bold mb-4",children:"Select Universe:"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:t.map(e=>(0,a.jsxs)("button",{onClick:()=>{j(e),I(e.code),O("phylum")},className:`p-4 rounded-lg border-2 transition-all hover:scale-105 font-mono ${N?.id===e.id?"bg-blue-100 dark:bg-blue-900 border-blue-600":"bg-gray-50 dark:bg-gray-800 border-gray-300 dark:border-gray-700 hover:border-blue-400"}`,children:[a.jsx("div",{className:"text-xl font-bold",children:e.code}),(0,a.jsxs)("div",{className:"text-sm mt-1",children:["(",e.name,")"]})]},e.id))})]}),N&&(!_||"phylum"===L)&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-white dark:bg-gray-900 rounded-lg border-2 border-blue-500",children:[a.jsx("h3",{className:"font-mono font-bold mb-4",children:"Select Phylum:"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:c.map(e=>(0,a.jsxs)("button",{onClick:()=>{w(e),R(e.code),O("family")},className:`p-4 rounded-lg border-2 transition-all hover:scale-105 font-mono ${_?.id===e.id?"bg-blue-100 dark:bg-blue-900 border-blue-600":"bg-gray-50 dark:bg-gray-800 border-gray-300 dark:border-gray-700 hover:border-blue-400"}`,children:[a.jsx("div",{className:"text-xl font-bold",children:e.code}),(0,a.jsxs)("div",{className:"text-sm mt-1",children:["(",e.name,")"]})]},e.id))})]}),_&&(!S||"family"===L)&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-white dark:bg-gray-900 rounded-lg border-2 border-yellow-500",children:[a.jsx("h3",{className:"font-mono font-bold mb-4",children:"Select Family (Optional):"}),a.jsx("button",{onClick:()=>{C(null),B(""),O("group")},className:"w-full mb-3 p-3 text-left font-mono text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700",children:"â†’ Skip to Group (no family)"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:g.map(e=>(0,a.jsxs)("button",{onClick:()=>{C(e),B(e.code),O("group")},className:`p-4 rounded-lg border-2 transition-all hover:scale-105 font-mono ${S?.id===e.id?"bg-yellow-100 dark:bg-yellow-900 border-yellow-600":"bg-gray-50 dark:bg-gray-800 border-gray-300 dark:border-gray-700 hover:border-yellow-400"}`,children:[a.jsx("div",{className:"text-xl font-bold",children:e.code}),(0,a.jsxs)("div",{className:"text-sm mt-1",children:["(",e.name,")"]})]},e.id))})]}),_&&(!T||"group"===L)&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-white dark:bg-gray-900 rounded-lg border-2 border-green-500",children:[a.jsx("h3",{className:"font-mono font-bold mb-4",children:"Select or Create Group:"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-3",children:[m.map(e=>(0,a.jsxs)("button",{onClick:()=>{q(e),P(String(e.group_num).padStart(2,"0")),O(null)},className:`p-3 rounded-lg border-2 transition-all hover:scale-105 font-mono ${$?.group_num===e.group_num?"bg-green-100 dark:bg-green-900 border-green-600":"bg-gray-50 dark:bg-gray-800 border-gray-300 dark:border-gray-700 hover:border-green-400"}`,children:[a.jsx("div",{className:"text-lg font-bold",children:String(e.group_num).padStart(2,"0")}),a.jsx("div",{className:"text-xs truncate",children:e.name}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[e.task_count||0," tasks"]})]},`${e.group_num}`)),(0,a.jsxs)("button",{onClick:()=>{P(String(Math.max(...m.map(e=>e.group_num),-1)+1).padStart(2,"0")),O(null)},className:"p-3 rounded-lg border-2 border-dashed border-gray-400 hover:border-green-400 transition-all font-mono",children:[a.jsx("div",{className:"text-2xl text-gray-400",children:"+"}),a.jsx("div",{className:"text-xs",children:"New"})]})]})]}),T&&!E&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-white dark:bg-gray-900 rounded-lg border-2 border-green-500",children:[a.jsx("h3",{className:"font-mono font-bold mb-4",children:"Enter Task Number:"}),a.jsx("input",{type:"text",value:E,onChange:e=>F(e.target.value.replace(/\D/g,"").slice(0,2)),placeholder:"##",className:"w-24 px-4 py-3 text-xl font-mono text-center bg-gray-50 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:border-green-500",maxLength:2}),2===E.length&&a.jsx("button",{onClick:Y,className:"ml-4 px-6 py-3 bg-green-600 text-white font-mono rounded-lg hover:bg-green-700 transition-colors",children:"CREATE TASK"})]}),(0,a.jsxs)("div",{className:"mt-8 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg",children:[a.jsx("h3",{className:"font-mono font-bold mb-3",children:"Recent Tasks:"}),a.jsx("div",{className:"space-y-2",children:x.slice(0,5).map(r=>(0,a.jsxs)("div",{onClick:()=>e.push(`/t/${r.base_code?.toLowerCase()}`),className:"flex items-center p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded cursor-pointer font-mono text-sm",children:[a.jsx("span",{className:"text-gray-500",children:">"}),a.jsx("span",{className:"ml-2 font-bold",children:r.base_code}),(0,a.jsxs)("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:['"',r.title,'"']})]},r.id))})]})]})})}},3313:(e,r,t)=>{"use strict";function a(e=new Date){let r=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${r}-${t}-${a}`}function s(e=new Date){let r=String(e.getHours()).padStart(2,"0"),t=String(e.getMinutes()).padStart(2,"0");return`${r}:${t}`}t.d(r,{BT:()=>s,LJ:()=>a})},751:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>o,__esModule:()=>s,default:()=>n});let a=(0,t(6843).createProxy)(String.raw`/workspaces/ZQLC/app/page.tsx`),{__esModule:s,$$typeof:o}=a,n=a.default}};var r=require("../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[939,704],()=>t(9319));module.exports=a})();