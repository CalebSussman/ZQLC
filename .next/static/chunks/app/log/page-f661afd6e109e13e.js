(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[19],{6153:function(e,t,r){Promise.resolve().then(r.bind(r,588))},588:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var a=r(3827),s=r(4090),n=r(5922),o=r(6332);function l(){var e,t;let[r,l]=(0,s.useState)(new Date),[i,c]=(0,s.useState)("daily"),[d,g]=(0,s.useState)([]),[m,x]=(0,s.useState)([]),[b,u]=(0,s.useState)([]),[h,y]=(0,s.useState)([]),[p,v]=(0,s.useState)(!1),[f,k]=(0,s.useState)(!1),[j,w]=(0,s.useState)(!1),[N,_]=(0,s.useState)(null),[S,O]=(0,s.useState)(null),[D,E]=(0,s.useState)(null),[C,A]=(0,s.useState)({x:0,y:0}),[L,T]=(0,s.useState)(null),[M,I]=(0,s.useState)({isDragging:!1,dragType:null,draggedItem:null,startPosition:{x:0,y:0},currentPosition:{x:0,y:0}}),[U,W]=(0,s.useState)(!1),[Y,P]=(0,s.useState)(""),[F,J]=(0,s.useState)([]),[z,R]=(0,s.useState)(""),[X,q]=(0,s.useState)("step"),[H,G]=(0,s.useState)(!1),[B,K]=(0,s.useState)(""),[Z,Q]=(0,s.useState)(null),[V,$]=(0,s.useState)(!1),[ee,et]=(0,s.useState)("SOA"),er=(0,s.useRef)(null),ea=(0,s.useRef)(null);(0,s.useEffect)(()=>{v(!0);let e=()=>k(window.innerWidth<768);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,s.useEffect)(()=>{p&&("daily"===i?ec():"weekly"===i?ed():"monthly"===i&&eg(),em())},[r,i,p]);let es=e=>{let t=new Date(e);t.setDate(e.getDate()-e.getDay());let r=new Date(t);return r.setDate(t.getDate()+6),{start:t,end:r}},en=e=>({start:new Date(e.getFullYear(),e.getMonth(),1),end:new Date(e.getFullYear(),e.getMonth()+1,0)}),eo=e=>{let t=new Date(e.getFullYear(),0,1);return Math.floor((e.getTime()-t.getTime())/6048e5)+1},el=e=>{let{start:t,end:r}=es(e),a=t.toLocaleDateString("en-US",{month:"short",day:"numeric"}),s=r.toLocaleDateString("en-US",{month:"short",day:"numeric"});return"".concat(a," - ").concat(s,", ").concat(e.getFullYear())},ei=e=>e.toLocaleDateString("en-US",{month:"long",year:"numeric"}),ec=async()=>{try{let{data:e,error:t}=await n.O.from("calendar_entries").select("*").eq("date",(0,o.LJ)(r)).order("start_time");if(t)throw t;let a=await Promise.all((e||[]).map(async e=>{let{data:t}=await n.O.from("task_details").select("id, code, title, current_status, current_status_name").eq("code",e.task_code).single(),r="";if(null==t?void 0:t.id){let{data:e}=await n.O.from("task_entries").select("note, entry_timestamp").eq("task_id",t.id).not("note","is",null).not("note","eq","").order("entry_timestamp",{ascending:!1}).limit(1).single(),{data:a}=await n.O.from("task_notes").select("content, created_at").eq("task_id",t.id).order("created_at",{ascending:!1}).limit(1).single(),s=(null==e?void 0:e.entry_timestamp)?new Date(e.entry_timestamp):null,o=(null==a?void 0:a.created_at)?new Date(a.created_at):null;s&&o?r=s>o?(null==e?void 0:e.note)||"":(null==a?void 0:a.content)||"":s?r=(null==e?void 0:e.note)||"":o&&(r=(null==a?void 0:a.content)||"")}return{...e,status_code:(null==t?void 0:t.current_status)||e.status_code,work_description:r||e.work_description||"",task_info:t}}));g(a)}catch(e){console.error("Error loading entries:",e)}},ed=async()=>{try{let{start:e,end:t}=es(r),{data:a,error:s}=await n.O.from("calendar_entries").select("*").gte("date",(0,o.LJ)(e)).lte("date",(0,o.LJ)(t)).order("date").order("start_time");if(s)throw s;x(a||[])}catch(e){console.error("Error loading weekly entries:",e)}},eg=async()=>{try{let{start:e,end:t}=en(r),{data:a,error:s}=await n.O.from("calendar_entries").select("*").gte("date",(0,o.LJ)(e)).lte("date",(0,o.LJ)(t)).order("date").order("start_time");if(s)throw s;u(a||[])}catch(e){console.error("Error loading monthly entries:",e)}},em=async()=>{try{let{data:e,error:t}=await n.O.from("task_details").select("*").in("status",["active"]).order("updated_at",{ascending:!1}).limit(50);if(t)throw t;y(e||[])}catch(e){console.error("Error loading tasks:",e)}},ex=async e=>{if(!e.trim()){J([]);return}try{let{data:t,error:r}=await n.O.from("task_details").select("*").or("title.ilike.%".concat(e,"%,code.ilike.%").concat(e,"%,base_code.ilike.%").concat(e,"%")).limit(20);if(r)throw r;J(t||[])}catch(e){console.error("Error searching tasks:",e),J([])}},eb=e=>{let[t,r]=e.split(":").map(Number);return 60*t+r},eu=e=>"".concat(Math.floor(e/60).toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0")),eh=e=>{if(!S||M.isDragging)return 64;let t=Math.abs(e-S);return 0===t?120:1===t?90:2===t?65:40},ey=()=>{let e=[];for(let t=7;t<=23;t++){let r=eh(t)/4;for(let a=0;a<4;a++){let s=60*t+15*a,n=eu(s);e.push({time:n,minutes:s,hour:t,quarter:a,height:r,label:0===a?"".concat(12===t?12:t>12?t-12:t).concat(t>=12?"PM":"AM"):""})}}return e},ep=e=>"".concat(e.status_code,"-").concat(e.task_code),ev=async()=>{$(!0);let e="daily"===i?"SOA":"weekly"===i?"SOWA":"SOMA";et(e);try{let t,s;if("SOA"===e){let e=(0,o.LJ)(r),{data:a}=await n.O.from("calendar_entries").select("*").eq("date",e).order("start_time");t=a||[],s=e}else if("SOWA"===e){let{start:e,end:a}=es(r),{data:l}=await n.O.from("calendar_entries").select("*").gte("date",(0,o.LJ)(e)).lte("date",(0,o.LJ)(a)).order("date").order("start_time");t=l||[],s="".concat(el(r))}else{let{start:e,end:a}=en(r),{data:l}=await n.O.from("calendar_entries").select("*").gte("date",(0,o.LJ)(e)).lte("date",(0,o.LJ)(a)).order("date").order("start_time");t=l||[],s=ei(r)}let l=Array.from(new Set((null==t?void 0:t.map(e=>e.task_code))||[])),{data:i}=await n.O.from("task_details").select("*").in("base_code",l),c=(i||[]).reduce((e,t)=>(e[t.base_code]=t,e),{}),d={};null==t||t.forEach(e=>{let t=c[e.task_code];if(t){let r=t.universe_name||"Unknown",a=t.phylum_name||"Unknown",s=t.family_name||null,n=t.base_code;d[r]||(d[r]={name:r,phylums:{}}),d[r].phylums[a]||(d[r].phylums[a]={name:a,families:{}});let o=s||"Direct";d[r].phylums[a].families[o]||(d[r].phylums[a].families[o]={name:s||"Direct",tasks:{}}),d[r].phylums[a].families[o].tasks[n]||(d[r].phylums[a].families[o].tasks[n]={title:t.title,code:t.base_code,entries:[]}),d[r].phylums[a].families[o].tasks[n].entries.push({...e,taskTitle:t.title,taskCode:t.base_code,fullStatusCode:ep(e)})}}),Object.values(d).forEach(e=>{Object.values(e.phylums).forEach(e=>{Object.values(e.families).forEach(e=>{Object.values(e.tasks).forEach(e=>{e.entries.sort((e,t)=>e.start_time.localeCompare(t.start_time))})})})});let g=Object.values(d).reduce((e,t)=>e+Object.values(t.phylums).reduce((e,t)=>e+Object.values(t.families).reduce((e,t)=>e+Object.values(t.tasks).reduce((e,t)=>e+t.entries.length,0),0),0),0),m=Object.values(d).reduce((e,t)=>(Object.values(t.phylums).forEach(t=>{Object.values(t.families).forEach(t=>{Object.keys(t.tasks).forEach(t=>e.add(t))})}),e),new Set).size,x=(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg p-4 border border-blue-200 dark:border-blue-700",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:g}),(0,a.jsx)("div",{className:"text-sm text-blue-800 dark:text-blue-300 font-mono",children:"Activities"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:m}),(0,a.jsx)("div",{className:"text-sm text-blue-800 dark:text-blue-300 font-mono",children:"Tasks"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:Object.keys(d).length}),(0,a.jsx)("div",{className:"text-sm text-blue-800 dark:text-blue-300 font-mono",children:"Universes"})]})]})}),0===Object.keys(d).length?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("div",{className:"text-gray-500 dark:text-gray-400 font-mono",children:"No activities logged for this date"})}):Object.entries(d).map(e=>{let[t,r]=e,s={Work:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700",Personal:"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-700",Home:"bg-orange-50 dark:bg-orange-900/20 border-orange-200 dark:border-orange-700"}[t]||"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700",n=Object.values(r.phylums).reduce((e,t)=>e+Object.values(t.families).reduce((e,t)=>e+Object.keys(t.tasks).length,0),0),o=Object.values(r.phylums).reduce((e,t)=>e+Object.values(t.families).reduce((e,t)=>e+Object.values(t.tasks).reduce((e,t)=>e+t.entries.length,0),0),0);return(0,a.jsxs)("div",{className:"rounded-lg p-4 border ".concat(s),children:[(0,a.jsx)("h3",{className:"font-mono font-bold text-lg mb-3",children:t.toUpperCase()}),(0,a.jsx)("div",{className:"space-y-3",children:Object.entries(r.phylums).map(e=>{let[t,r]=e;return(0,a.jsxs)("div",{className:"ml-2",children:[(0,a.jsx)("h4",{className:"font-mono font-semibold text-md text-gray-700 dark:text-gray-300 mb-2",children:t}),(0,a.jsx)("div",{className:"space-y-2",children:Object.entries(r.families).map(e=>{let[t,r]=e;return(0,a.jsxs)("div",{className:"ml-3",children:["Direct"!==r.name&&(0,a.jsx)("h5",{className:"font-mono text-sm text-gray-600 dark:text-gray-400 mb-1",children:r.name}),(0,a.jsx)("div",{className:"space-y-2 ml-2",children:Object.entries(r.tasks).map(e=>{let[t,r]=e;return(0,a.jsxs)("div",{className:"border-l-2 border-gray-300 dark:border-gray-600 pl-3",children:[(0,a.jsx)("div",{className:"font-medium text-gray-800 dark:text-gray-200 mb-1",children:r.title}),(0,a.jsx)("div",{className:"space-y-1",children:r.entries.map((e,t)=>{let r=e.end_time?"".concat(e.start_time," - ").concat(e.end_time):"".concat(e.start_time," (ongoing)"),s={R:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",P:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",D:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300",C:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",F:"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300",X:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}[e.status_code]||"bg-gray-100 text-gray-800";return(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("div",{className:"flex items-start justify-between mb-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"px-2 py-1 rounded text-xs font-mono ".concat(s),children:["[",e.fullStatusCode,"]"]}),(0,a.jsx)("span",{className:"font-mono text-sm text-gray-600 dark:text-gray-400",children:r})]})}),e.work_description&&e.work_description!==e.taskTitle&&(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.work_description})]},t)})})]},t)})})]},t)})})]},t)})}),(0,a.jsxs)("div",{className:"mt-3 text-sm text-gray-600 dark:text-gray-400 font-mono",children:[o," activities across ",n," tasks in ",t]})]},t)}),(0,a.jsxs)("div",{className:"text-center text-sm text-gray-500 dark:text-gray-400 font-mono",children:["Generated on ",new Date().toLocaleString(),(0,a.jsx)("br",{}),"ATOL Semantic Ledger v1.0"]})]});Q(x);let b=ef(d,e,s);K(b),G(!0)}catch(e){console.error("Error generating summary:",e)}finally{$(!1)}},ef=(e,t,r)=>{let a=Object.values(e).reduce((e,t)=>e+Object.values(t.phylums).reduce((e,t)=>e+Object.values(t.families).reduce((e,t)=>e+Object.values(t.tasks).reduce((e,t)=>e+t.entries.length,0),0),0),0),s=Object.values(e).reduce((e,t)=>(Object.values(t.phylums).forEach(t=>{Object.values(t.families).forEach(t=>{Object.keys(t.tasks).forEach(t=>e.add(t))})}),e),new Set).size,n="# ".concat({SOA:"Statement of Activities",SOWA:"Statement of Weekly Activities",SOMA:"Statement of Monthly Activities"}[t],"\n");return n+="## ".concat("SOA"===t?"Date":"Period",": ").concat(r,"\n\n")+"### Summary\n"+"- **Total Activities:** ".concat(a,"\n")+"- **Unique Tasks:** ".concat(s,"\n")+"- **Universes:** ".concat(Object.keys(e).length,"\n\n"),Object.entries(e).forEach(e=>{let[t,r]=e,a=Object.values(r.phylums).reduce((e,t)=>e+Object.values(t.families).reduce((e,t)=>e+Object.values(t.tasks).reduce((e,t)=>e+t.entries.length,0),0),0);n+="## ".concat(t.toUpperCase()," (").concat(a," activities)\n\n"),Object.entries(r.phylums).forEach(e=>{let[t,r]=e;n+="### ".concat(t,"\n\n"),Object.entries(r.families).forEach(e=>{let[t,r]=e;"Direct"!==r.name&&(n+="#### ".concat(r.name,"\n\n")),Object.entries(r.tasks).forEach(e=>{let[t,r]=e;n+="**".concat(r.title,"** (").concat(r.code,")\n\n"),r.entries.forEach(e=>{let t=e.end_time?"".concat(e.start_time," - ").concat(e.end_time):"".concat(e.start_time," (ongoing)");n+="- [".concat(e.fullStatusCode,"] ").concat(t),e.work_description&&e.work_description!==e.taskTitle&&(n+=" - ".concat(e.work_description)),n+="\n"}),n+="\n"})})})}),n+="---\nGenerated on ".concat(new Date().toLocaleString(),"\nATOL Semantic Ledger v1.0\n")},ek=async(e,t)=>{try{let a=eb(t),s=eu(Math.min(a+30,1365)),l=e.base_code||e.code.substring(0,20),{error:i}=await n.O.from("calendar_entries").insert({task_code:l,status_code:e.current_status||"P",work_description:e.title,date:(0,o.LJ)(r),start_time:t,end_time:s,is_parallel:!1,track_number:1});if(i)throw i;let{error:c}=await n.O.rpc("create_task_entry",{p_task_id:e.id,p_status_code:e.current_status||"P",p_note:"Scheduled: ".concat(t," - ").concat(s," | ").concat(e.title),p_entry_timestamp:new Date().toISOString()});if(c)throw c;ec(),W(!1),P(""),J([])}catch(e){console.error("Error creating entry:",e),alert("Failed to create entry: "+e.message)}},ej=async(e,t)=>{try{let{data:r}=await n.O.from("calendar_entries").select("*").eq("id",e).single();if(!r)throw Error("Entry not found");let{error:a}=await n.O.from("calendar_entries").update(t).eq("id",e);if(a)throw a;if(t.status_code&&t.status_code!==r.status_code||void 0!==t.work_description&&t.work_description!==r.work_description){let{data:e}=await n.O.from("tasks").select("id").eq("base_code",r.task_code).single();if(e){let a="";t.status_code&&t.status_code!==r.status_code&&(a="Status changed to ".concat(t.status_code," via calendar")),void 0!==t.work_description&&t.work_description!==r.work_description&&(a&&(a+=" | "),a+="Note updated via calendar: ".concat(t.work_description||"cleared"));let{error:s}=await n.O.rpc("create_task_entry",{p_task_id:e.id,p_status_code:t.status_code||r.status_code,p_note:a,p_entry_timestamp:new Date().toISOString()});if(s&&console.error("Error creating task entry:",s),void 0!==t.work_description&&t.work_description!==r.work_description){let{error:r}=await n.O.from("task_notes").insert({task_id:e.id,type:X,content:t.work_description||"Note cleared via calendar"});r&&console.error("Error creating task note:",r)}}}ec()}catch(e){console.error("Error updating entry:",e),alert("Failed to update entry: "+e.message)}},ew=async e=>{try{let{error:t}=await n.O.from("calendar_entries").delete().eq("id",e);if(t)throw t;ec(),T(null)}catch(e){console.error("Error deleting entry:",e),alert("Failed to delete entry: "+e.message)}},eN=(e,t,r)=>{if(e.preventDefault(),e.stopPropagation(),I({isDragging:!0,dragType:r,draggedItem:t,startPosition:{x:e.clientX,y:e.clientY},currentPosition:{x:e.clientX,y:e.clientY}}),ea.current){let a=ea.current;a.style.display="block",a.style.left="".concat(e.clientX+10,"px"),a.style.top="".concat(e.clientY+10,"px"),a.textContent="task"===r?"".concat(t.code," - ").concat(t.title):"".concat(t.task_code," (").concat(t.start_time,")")}},e_=e=>{if(M.isDragging&&(I(t=>({...t,currentPosition:{x:e.clientX,y:e.clientY}})),ea.current&&(ea.current.style.left="".concat(e.clientX+10,"px"),ea.current.style.top="".concat(e.clientY+10,"px")),er.current)){let t=er.current.getBoundingClientRect(),r=e.clientY-t.top,a=ey(),s=0,n=null;for(let e of a){if(r>=s&&r<s+e.height){n=e.time;break}s+=e.height}_(n)}},eS=()=>{if(!M.isDragging||!M.draggedItem){eO();return}N&&er.current&&"task"===M.dragType&&ek(M.draggedItem,N),eO()},eO=()=>{I({isDragging:!1,dragType:null,draggedItem:null,startPosition:{x:0,y:0},currentPosition:{x:0,y:0}}),_(null),ea.current&&(ea.current.style.display="none")};(0,s.useEffect)(()=>{let e=e=>{A({x:e.clientX,y:e.clientY}),M.isDragging&&e_(e)};return document.addEventListener("mousemove",e),M.isDragging&&document.addEventListener("mouseup",eS),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",eS)}},[M.isDragging,N]);let eD=e=>{let t=new Date(r);"daily"===i?t.setDate(r.getDate()+("next"===e?1:-1)):"weekly"===i?t.setDate(r.getDate()+("next"===e?7:-7)):"monthly"===i&&t.setMonth(r.getMonth()+("next"===e?1:-1)),l(t)},eE=()=>r.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),eC=()=>{let e=r.toLocaleDateString("en-US",{weekday:"long"}),t=r.toLocaleDateString("en-US",{month:"long"}),a=r.getDate(),s=r.getFullYear();return{weekday:e,month:t,dayYear:"".concat(a,", ").concat(s)}},eA=e=>{switch(e){case"R":return"bg-blue-500";case"P":return"bg-yellow-500";case"D":return"bg-purple-500";case"C":return"bg-green-500";case"F":return"bg-gray-500";case"X":return"bg-red-500";default:return"bg-gray-400"}};return p?(0,a.jsxs)("div",{className:"min-h-screen bg-[#F8F7F4] dark:bg-[#0A0A0B]",children:[(0,a.jsx)("div",{className:"border-b-2 border-gray-900 dark:border-gray-300 p-4",children:(0,a.jsx)("div",{className:"font-mono",children:f?(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"text-sm font-bold flex-1 leading-tight",children:[(0,a.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:eC().weekday}),(0,a.jsx)("div",{className:"text-base",children:eC().month}),(0,a.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:eC().dayYear})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-1",children:[(0,a.jsx)("button",{onClick:()=>l(new Date),className:"px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded hover:bg-gray-300 dark:hover:bg-gray-600 text-xs font-mono",children:"TODAY"}),(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsx)("button",{onClick:()=>eD("prev"),className:"px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded hover:bg-gray-300 dark:hover:bg-gray-600 text-xs font-mono",children:"<"}),(0,a.jsx)("button",{onClick:()=>eD("next"),className:"px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded hover:bg-gray-300 dark:hover:bg-gray-600 text-xs font-mono",children:">"})]})]}),(0,a.jsx)("div",{className:"w-px h-12 bg-gray-400 mx-2"}),(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsxs)("div",{className:"flex space-x-1 mb-1",children:[(0,a.jsx)("button",{onClick:()=>c("daily"),className:"px-2 py-1 rounded text-xs font-mono transition-colors ".concat("daily"===i?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600"),children:"DAY"}),(0,a.jsx)("button",{onClick:()=>c("weekly"),className:"px-2 py-1 rounded text-xs font-mono transition-colors ".concat("weekly"===i?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600"),children:"WK"}),(0,a.jsx)("button",{onClick:()=>c("monthly"),className:"px-2 py-1 rounded text-xs font-mono transition-colors ".concat("monthly"===i?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600"),children:"MO"})]}),(0,a.jsx)("button",{onClick:()=>w(!j),className:"px-2 py-1 rounded text-xs font-mono transition-colors ".concat(j?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600"),children:"TASKS"}),(0,a.jsx)("button",{onClick:ev,disabled:V,className:"px-2 py-1 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded text-xs font-mono transition-colors",children:V?"GEN...":ee})]})]})]}):(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h1",{className:"text-xl font-bold",children:["daily"===i&&eE(),"weekly"===i&&"Week ".concat(eo(r),": ").concat(el(r)),"monthly"===i&&ei(r)]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>eD("prev"),className:"px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded hover:bg-gray-300 dark:hover:bg-gray-600 text-xs font-mono",children:"[<]"}),(0,a.jsx)("button",{onClick:()=>l(new Date),className:"px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded hover:bg-gray-300 dark:hover:bg-gray-600 text-xs font-mono",children:"TODAY"}),(0,a.jsx)("button",{onClick:()=>eD("next"),className:"px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded hover:bg-gray-300 dark:hover:bg-gray-600 text-xs font-mono",children:"[>]"}),(0,a.jsx)("div",{className:"w-px h-6 bg-gray-400 mx-2"}),(0,a.jsxs)("div",{className:"flex space-x-2 mr-4",children:[(0,a.jsx)("button",{onClick:()=>c("daily"),className:"px-2 py-1 rounded text-xs font-mono transition-colors ".concat("daily"===i?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600"),children:"[DAILY]"}),(0,a.jsx)("button",{onClick:()=>c("weekly"),className:"px-2 py-1 rounded text-xs font-mono transition-colors ".concat("weekly"===i?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600"),children:"[WEEKLY]"}),(0,a.jsx)("button",{onClick:()=>c("monthly"),className:"px-2 py-1 rounded text-xs font-mono transition-colors ".concat("monthly"===i?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600"),children:"[MONTHLY]"})]}),(0,a.jsx)("button",{onClick:()=>w(!j),className:"px-2 py-1 rounded text-xs font-mono transition-colors ".concat(j?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600"),children:"[TASKS]"}),(0,a.jsx)("button",{onClick:ev,disabled:V,className:"px-2 py-1 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded text-xs font-mono transition-colors",children:V?"[GENERATING...]":"[".concat(ee,"]")})]})]})})}),(0,a.jsxs)("div",{className:"flex",children:[j&&(0,a.jsx)("div",{className:"".concat(f?"fixed inset-0 z-40 bg-black/50":"w-80"),children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-900 h-full border-r border-gray-300 dark:border-gray-700 p-4 overflow-y-auto ".concat(f?"w-80 shadow-xl":""),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-mono font-bold",children:"Available Tasks"}),f&&(0,a.jsx)("button",{onClick:()=>w(!1),className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[h.map(e=>(0,a.jsxs)("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 cursor-move hover:shadow-md transition-shadow",onMouseDown:t=>eN(t,e,"task"),children:[(0,a.jsx)("div",{className:"font-mono font-bold text-sm",children:e.display_code||e.base_code||e.code}),(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.title}),e.current_status&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Status: ",e.current_status]})]},e.id)),0===h.length&&(0,a.jsx)("div",{className:"text-center text-gray-500 py-8",children:"No active tasks found"})]})]})}),(0,a.jsx)("div",{className:"flex-1 p-4",children:(0,a.jsxs)("div",{className:"relative",children:["daily"===i&&(0,a.jsxs)("div",{ref:er,className:"relative bg-white dark:bg-gray-900 rounded-lg border border-gray-300 dark:border-gray-700 overflow-hidden",onMouseLeave:()=>{_(null),E(null),O(null)},children:[ey().map(e=>(0,a.jsxs)("div",{className:"relative border-b transition-all duration-300 ease-out ".concat(0===e.quarter?"border-gray-400 dark:border-gray-500":"border-gray-100 dark:border-gray-800"," ").concat(N===e.time&&M.isDragging?"bg-blue-50 dark:bg-blue-900/20":""," ").concat(M.isDragging?"":"hover:bg-gray-50 dark:hover:bg-gray-800/50"),style:{height:"".concat(e.height,"px")},onMouseEnter:()=>{M.isDragging||(_(e.time),O(e.hour))},onClick:()=>{M.isDragging||(R(e.time),W(!0))},children:[e.label&&(0,a.jsx)("div",{className:"absolute right-2 top-1 text-xs font-mono text-gray-500 z-20",children:e.label}),(0,a.jsx)("div",{className:"absolute left-2 top-0 w-4 h-px bg-gray-300 dark:bg-gray-600 z-20"}),N===e.time&&M.isDragging&&(0,a.jsx)("div",{className:"absolute inset-x-2 inset-y-1 border-2 border-dashed border-blue-400 dark:border-blue-500 rounded bg-blue-50 dark:bg-blue-900/20 z-10"}),!M.isDragging&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity",children:(0,a.jsx)("div",{className:"text-xs text-gray-400 font-mono",children:"+ Add task"})})]},e.time)),(()=>{let e=[];return d.forEach(t=>{let r=eb(t.start_time),a=t.end_time?eb(t.end_time):r+60,s=!1;for(let n of e)if(n.some(e=>{let t=eb(e.start_time);return r<(e.end_time?eb(e.end_time):t+60)&&a>t})){n.push(t),s=!0;break}s||e.push([t])}),e.flatMap(e=>{let t=e.length;return e.map((e,r)=>{var s,n;let o=eb(e.start_time),l=e.end_time?eb(e.end_time):o+60,i=0,c=ey();for(let e of c){if(e.minutes>=o)break;i+=e.height}let d=0;for(let e of c)e.minutes>=o&&e.minutes<l&&(d+=e.height);let g=Math.floor((window.innerWidth<768?window.innerWidth-70:((null===(s=er.current)||void 0===s?void 0:s.clientWidth)||800)-60)/t)-4,m={top:"".concat(i,"px"),height:"".concat(Math.max(d-4,20),"px"),left:"".concat(50+r*(g+4),"px"),width:"".concat(g,"px")};return(0,a.jsx)("div",{className:"absolute transition-all duration-200 cursor-pointer hover:opacity-80 rounded ".concat(eA(e.status_code)," ").concat((null==D?void 0:D.id)===e.id?"ring-2 ring-white ring-opacity-50":""),style:{...m,zIndex:30,margin:"2px"},onMouseEnter:()=>{E(e)},onMouseLeave:()=>E(null),onClick:t=>{t.preventDefault(),t.stopPropagation(),T(e)},children:(0,a.jsx)("div",{className:"absolute inset-0 flex items-center transition-all duration-200 ".concat((null==D?void 0:D.id)===e.id?"justify-end pr-4":"justify-center"),children:(0,a.jsxs)("div",{className:"text-xs text-white text-center",children:[(0,a.jsxs)("div",{className:"font-mono font-bold truncate",children:["[",e.status_code,"] ",e.task_code]}),(null===(n=e.task_info)||void 0===n?void 0:n.title)&&(0,a.jsx)("div",{className:"opacity-90 text-xs truncate font-medium",children:e.task_info.title}),(0,a.jsxs)("div",{className:"opacity-75 text-xs",children:[e.start_time," - ",e.end_time||"ongoing"]})]})})},e.id)})})})(),!M.isDragging&&0===d.length&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-gray-400 pointer-events-none",children:(0,a.jsxs)("div",{className:"text-center font-mono",children:[(0,a.jsx)("div",{children:"Drag tasks from panel to schedule"}),(0,a.jsx)("div",{className:"text-sm mt-1",children:"Or click time slots to search tasks"})]})})]}),"weekly"===i&&(0,a.jsx)("div",{className:"bg-white dark:bg-gray-900 rounded-lg border border-gray-300 dark:border-gray-700 overflow-hidden",children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"text-center font-mono text-lg font-bold mb-4",children:["Week ",eo(r),": ",el(r)]}),(0,a.jsxs)("div",{className:"grid grid-cols-8 gap-1 text-xs font-mono",children:[(0,a.jsx)("div",{className:"text-center font-bold p-2",children:"TIME"}),["SUN","MON","TUE","WED","THU","FRI","SAT"].map(e=>(0,a.jsx)("div",{className:"text-center font-bold p-2",children:e},e)),Array.from({length:24},(e,t)=>{let{start:n}=es(r);return(0,a.jsxs)(s.Fragment,{children:[(0,a.jsxs)("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-800",children:[t.toString().padStart(2,"0"),":00"]}),Array.from({length:7},(e,r)=>{let s=new Date(n);s.setDate(n.getDate()+r);let o=m.filter(e=>{let r=new Date(e.date),a=parseInt(e.start_time.split(":")[0]);return r.toDateString()===s.toDateString()&&a===t}),l=0===o.length?"low":o.length<=2?"medium":"high";return(0,a.jsx)("div",{className:"h-8 border border-gray-200 dark:border-gray-700 ".concat({low:"bg-gray-100 dark:bg-gray-800",medium:"bg-gray-300 dark:bg-gray-600",high:"bg-gray-500 dark:bg-gray-400"}[l]," hover:opacity-80 cursor-pointer transition-opacity"),title:"".concat(s.toLocaleDateString(),": ").concat(o.length," entries")},r)})]},t)})]})]})}),"monthly"===i&&(0,a.jsx)("div",{className:"bg-white dark:bg-gray-900 rounded-lg border border-gray-300 dark:border-gray-700 overflow-hidden",children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("div",{className:"text-center font-mono text-lg font-bold mb-4",children:ei(r)}),(0,a.jsxs)("div",{className:"grid grid-cols-7 gap-1 text-xs font-mono",children:[["SUN","MON","TUE","WED","THU","FRI","SAT"].map(e=>(0,a.jsx)("div",{className:"text-center font-bold p-2 bg-gray-50 dark:bg-gray-800",children:e},e)),(()=>{let{start:e,end:t}=en(r),s=new Date(e);s.setDate(s.getDate()-s.getDay());let n=[],o=new Date(s);for(let e=0;e<42;e++){let s=b.filter(e=>new Date(e.date).toDateString()===o.toDateString()),l=o.getMonth()===r.getMonth(),i=0===s.length?"low":s.length<=3?"medium":"high",c={low:"bg-gray-100 dark:bg-gray-800",medium:"bg-gray-300 dark:bg-gray-600",high:"bg-gray-500 dark:bg-gray-400"};if(n.push((0,a.jsxs)("div",{className:"h-16 p-1 border border-gray-200 dark:border-gray-700 ".concat(l?c[i]:"bg-gray-50 dark:bg-gray-900 opacity-30"," hover:opacity-80 cursor-pointer transition-opacity relative"),title:"".concat(o.toLocaleDateString(),": ").concat(s.length," entries"),children:[(0,a.jsx)("div",{className:"text-xs font-bold",children:o.getDate()}),s.length>0&&(0,a.jsx)("div",{className:"text-xs text-center mt-1",children:s.length})]},e)),o.setDate(o.getDate()+1),41===e||o>t&&0===o.getDay())break}return n})()]}),(0,a.jsxs)("div",{className:"mt-4 flex justify-center space-x-4 text-xs font-mono",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-gray-100 dark:bg-gray-800 border"}),(0,a.jsx)("span",{children:"Low Activity"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-gray-300 dark:bg-gray-600 border"}),(0,a.jsx)("span",{children:"Medium Activity"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-gray-500 dark:bg-gray-400 border"}),(0,a.jsx)("span",{children:"High Activity"})]})]})]})})]})})]}),(0,a.jsx)("div",{ref:ea,className:"fixed z-50 bg-blue-600 text-white px-2 py-1 rounded shadow-lg font-mono text-sm pointer-events-none",style:{display:"none"}}),D&&(0,a.jsxs)("div",{className:"fixed z-40 bg-gray-900 text-white p-4 rounded-lg shadow-2xl border border-gray-700 font-mono text-sm max-w-sm",style:{left:"".concat(C.x+15,"px"),top:"".concat(C.y+15,"px"),pointerEvents:"none"},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded ".concat(eA(D.status_code))}),(0,a.jsxs)("div",{className:"font-bold text-yellow-400",children:["[",D.status_code,"] ",D.task_code]})]}),(null===(e=D.task_info)||void 0===e?void 0:e.title)&&(0,a.jsxs)("div",{className:"mb-3 pb-2 border-b border-gray-700",children:[(0,a.jsx)("div",{className:"text-gray-400 text-xs mb-1",children:"Task:"}),(0,a.jsx)("div",{className:"text-xs text-white font-medium",children:D.task_info.title})]}),(0,a.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Start:"}),(0,a.jsx)("span",{children:D.start_time})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"End:"}),(0,a.jsx)("span",{children:D.end_time||"Not set"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Duration:"}),(0,a.jsx)("span",{children:D.end_time?"".concat(eb(D.end_time)-eb(D.start_time)," min"):"Unknown"})]})]}),D.work_description&&(0,a.jsxs)("div",{className:"mt-3 pt-2 border-t border-gray-700",children:[(0,a.jsx)("div",{className:"text-gray-400 text-xs mb-1",children:"Work Notes:"}),(0,a.jsx)("div",{className:"text-xs text-gray-200",children:D.work_description})]}),(0,a.jsx)("div",{className:"mt-3 pt-2 border-t border-gray-700 text-xs text-gray-500",children:"Click to edit"})]}),U&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg w-full max-w-2xl max-h-96 flex flex-col",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Schedule task at ",z," on ",r.toLocaleDateString()]}),(0,a.jsx)("input",{type:"text",placeholder:"Search existing tasks...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0,value:Y,onChange:e=>{P(e.target.value),ex(e.target.value)},onKeyDown:e=>{"Escape"===e.key&&(W(!1),P(""),J([])),"Enter"===e.key&&F.length>0&&ek(F[0],z)}})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[Y&&0===F.length&&(0,a.jsxs)("div",{className:"p-4 text-center text-gray-500",children:['No tasks found matching "',Y,'"']}),F.length>0&&(0,a.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:F.map((e,t)=>(0,a.jsxs)("button",{onClick:()=>ek(e,z),className:"w-full text-left p-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[(0,a.jsxs)("div",{className:"font-mono font-bold",children:[e.display_code||e.base_code||e.code," - ",e.title]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[e.universe_name||"Unknown"," > ",e.phylum_name||"Unknown"]}),0===t&&(0,a.jsx)("div",{className:"text-xs text-blue-500 mt-1",children:"Press Enter to select"})]},e.id))}),!Y&&(0,a.jsxs)("div",{className:"p-4 text-gray-500 text-sm",children:[(0,a.jsx)("p",{children:"Type to search for existing tasks to schedule"}),(0,a.jsx)("p",{className:"mt-2",children:"• Search by task title, code, or identifier"}),(0,a.jsx)("p",{children:"• Press Enter to select first result"}),(0,a.jsx)("p",{children:"• Press ESC to cancel"})]})]}),(0,a.jsx)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end",children:(0,a.jsx)("button",{onClick:()=>{W(!1),P(""),J([])},className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors",children:"Cancel"})})]})}),L&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg w-full max-w-md",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:(0,a.jsx)("h3",{className:"font-mono font-bold",children:"Edit Entry"})}),(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-mono mb-1",children:"Task Code"}),(0,a.jsx)("div",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 font-mono",children:L.task_code}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Task code cannot be changed"})]}),(null===(t=L.task_info)||void 0===t?void 0:t.title)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-mono mb-1",children:"Task Title"}),(0,a.jsx)("div",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400",children:L.task_info.title}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Task title cannot be changed"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-mono mb-1",children:"Start Time"}),(0,a.jsx)("input",{type:"time",value:L.start_time,onChange:e=>T({...L,start_time:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-mono mb-1",children:"End Time"}),(0,a.jsx)("input",{type:"time",value:L.end_time||"",onChange:e=>T({...L,end_time:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-mono mb-2",children:"Work Notes"}),(0,a.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,a.jsx)("button",{onClick:()=>q("task"),className:"px-3 py-1 rounded text-xs ".concat("task"===X?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600"),children:"Task Note"}),(0,a.jsx)("button",{onClick:()=>q("step"),className:"px-3 py-1 rounded text-xs ".concat("step"===X?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600"),children:"Step Note"}),(0,a.jsx)("button",{onClick:()=>q("outcome"),className:"px-3 py-1 rounded text-xs ".concat("outcome"===X?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600"),children:"Outcome Note"})]}),(0,a.jsx)("textarea",{value:L.work_description,onChange:e=>T({...L,work_description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800",rows:3,placeholder:"Add a ".concat(X," note...")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-mono mb-2",children:"Status"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[{code:"R",name:"Received",color:"bg-blue-500"},{code:"P",name:"Pending",color:"bg-yellow-500"},{code:"D",name:"Delivered",color:"bg-purple-500"},{code:"C",name:"Completed",color:"bg-green-500"},{code:"F",name:"Filed",color:"bg-gray-500"},{code:"X",name:"Cancelled",color:"bg-red-500"}].map(e=>(0,a.jsxs)("button",{onClick:()=>T({...L,status_code:e.code}),className:"p-2 rounded text-xs font-mono text-white transition-opacity ".concat(e.color," ").concat(L.status_code===e.code?"opacity-100":"opacity-50"),children:["[",e.code,"] ",e.name]},e.code))})]})]}),(0,a.jsxs)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>{ej(L.id,{status_code:L.status_code,work_description:L.work_description,start_time:L.start_time,end_time:L.end_time}),T(null)},className:"flex-1 bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition-colors font-mono",children:"Save"}),(0,a.jsx)("button",{onClick:()=>{confirm("Delete this entry?")&&ew(L.id)},className:"flex-1 bg-red-600 text-white py-2 rounded hover:bg-red-700 transition-colors font-mono",children:"Delete"}),(0,a.jsx)("button",{onClick:()=>T(null),className:"flex-1 bg-gray-500 text-white py-2 rounded hover:bg-gray-600 transition-colors font-mono",children:"Cancel"})]})]})}),H&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-2 sm:p-4",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-lg w-full max-w-4xl max-h-[95vh] sm:max-h-[90vh] flex flex-col",children:[(0,a.jsx)("div",{className:"p-4 sm:p-6 border-b border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg sm:text-xl font-mono font-bold",children:["SOA"===ee&&"Statement of Activities","SOWA"===ee&&"Statement of Weekly Activities","SOMA"===ee&&"Statement of Monthly Activities"]}),(0,a.jsx)("div",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-1 font-mono",children:eE()})]}),(0,a.jsx)("button",{onClick:()=>G(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-xl",children:"✕"})]})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:Z}),(0,a.jsxs)("div",{className:"p-4 sm:p-6 border-t border-gray-200 dark:border-gray-700 flex flex-col sm:flex-row gap-2 sm:gap-3",children:[(0,a.jsx)("button",{onClick:()=>{let e=(0,o.LJ)(r),t={SOA:"SOA-".concat(e,".md"),SOWA:"SOWA-Week".concat(eo(r),"-").concat(r.getFullYear(),".md"),SOMA:"SOMA-".concat(r.toLocaleDateString("en-US",{month:"long",year:"numeric"}).replace(" ","-"),".md")}[ee],a=new Blob([B],{type:"text/markdown"}),s=URL.createObjectURL(a),n=document.createElement("a");n.href=s,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(s)},className:"flex-1 bg-green-600 text-white py-3 px-4 rounded hover:bg-green-700 transition-colors font-mono text-xs sm:text-sm",children:"[DOWNLOAD .MD]"}),(0,a.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(B),alert("".concat(ee," copied to clipboard!"))},className:"flex-1 bg-blue-600 text-white py-3 px-4 rounded hover:bg-blue-700 transition-colors font-mono text-xs sm:text-sm",children:"[COPY]"}),(0,a.jsx)("button",{onClick:()=>G(!1),className:"flex-1 bg-gray-500 text-white py-3 px-4 rounded hover:bg-gray-600 transition-colors font-mono text-xs sm:text-sm",children:"[CLOSE]"})]})]})})]}):(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Loading..."})}},6332:function(e,t,r){"use strict";function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(r,"-").concat(a)}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=String(e.getHours()).padStart(2,"0"),r=String(e.getMinutes()).padStart(2,"0");return"".concat(t,":").concat(r)}r.d(t,{BT:function(){return s},LJ:function(){return a}})},5922:function(e,t,r){"use strict";r.d(t,{O:function(){return a}});let a=(0,r(7887).eI)("https://ofiindxmfiptivijhbdi.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9maWluZHhtZmlwdGl2aWpoYmRpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgzOTU4MjEsImV4cCI6MjA3Mzk3MTgyMX0.P9Qmhha1EL7X0uQ8CiUF6LXWqBCQt1pJwg3cmcHkfR0")}},function(e){e.O(0,[887,971,69,744],function(){return e(e.s=6153)}),_N_E=e.O()}]);