(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{5255:function(e,t,s){Promise.resolve().then(s.t.bind(s,2445,23)),Promise.resolve().then(s.bind(s,7589))},7589:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var a=s(3827),l=s(7907),n=s(4090),r=s(5922);let o=[{key:"C",label:"Create",path:"/"},{key:"B",label:"Browse",path:"/browse"},{key:"T",label:"Todo",path:"/todo"},{key:"L",label:"Log",path:"/log"}];function i(){let e=(0,l.usePathname)(),t=(0,l.useRouter)(),[s,i]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!1),[m,x]=(0,n.useState)(""),[u,h]=(0,n.useState)([]),[f,y]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=()=>i(window.innerWidth<768);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,n.useEffect)(()=>{let e=e=>{(e.ctrlKey||e.metaKey)&&"k"===e.key&&(e.preventDefault(),d(!0)),c&&"Escape"===e.key&&(d(!1),x(""),h([]))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[c]),(0,n.useEffect)(()=>{let e=setTimeout(async()=>{if(!m.trim()){h([]),y(!1);return}y(!0);try{let{data:e}=await r.O.from("task_details").select("*").or("title.ilike.%".concat(m,"%,code.ilike.%").concat(m,"%,base_code.ilike.%").concat(m,"%,display_code.ilike.%").concat(m,"%")).limit(10),{data:t}=await r.O.from("task_notes").select("\n            task_id,\n            content,\n            tasks!inner(*)\n          ").ilike("content","%".concat(m,"%")).limit(5),s=[...e||[]];if(t)for(let e of t){let t=e.tasks;if(t&&!s.find(e=>e.id===t.id)){let{data:e}=await r.O.from("task_details").select("*").eq("id",t.id).single();e&&s.push(e)}}h(s.slice(0,10))}catch(e){console.error("Search error:",e),h([])}finally{y(!1)}},300);return()=>clearTimeout(e)},[m]);let p=e=>{var s;d(!1),x(""),h([]),t.push("/t/".concat(null===(s=e.base_code)||void 0===s?void 0:s.toLowerCase()))},b=()=>c&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-[100] flex items-start justify-center pt-16 sm:pt-32",onClick:()=>{d(!1),x(""),h([])},children:(0,a.jsxs)("div",{className:"bg-gray-900 border border-gray-700 rounded-lg w-full max-w-2xl shadow-2xl max-h-96 flex flex-col mx-4 sm:mx-0",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-700",children:(0,a.jsx)("input",{type:"text",placeholder:"Search tasks, codes, or commands...",className:"w-full bg-transparent text-white font-mono text-lg focus:outline-none",autoFocus:!0,value:m,onChange:e=>x(e.target.value),onKeyDown:e=>{"Escape"===e.key&&(d(!1),x(""),h([])),"Enter"===e.key&&u.length>0&&p(u[0])}})}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[f&&(0,a.jsx)("div",{className:"p-4 text-gray-500 font-mono text-sm text-center",children:"Searching..."}),!f&&m&&0===u.length&&(0,a.jsx)("div",{className:"p-4 text-gray-500 font-mono text-sm text-center",children:"No results found"}),!f&&u.length>0&&(0,a.jsx)("div",{className:"py-2",children:u.map((e,t)=>(0,a.jsx)("button",{onClick:()=>p(e),className:"w-full text-left px-4 py-3 hover:bg-gray-800 font-mono border-b border-gray-700 last:border-b-0",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"text-white font-bold text-sm sm:text-base",children:[e.display_code||e.base_code," - ",e.title]}),(0,a.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:[e.universe_name," "," > "," ",e.phylum_name,e.family_name&&" > ".concat(e.family_name)," "," > "," ",e.group_name]}),e.current_status_name&&(0,a.jsxs)("div",{className:"text-xs text-yellow-400 mt-1",children:["Status: ",e.current_status_name]})]}),(0,a.jsx)("div",{className:"text-gray-500 text-xs ml-4 hidden sm:block",children:0===t&&"Enter"})]})},e.id))}),!m&&(0,a.jsxs)("div",{className:"p-4 text-gray-500 font-mono text-sm",children:[(0,a.jsx)("p",{children:"Type to search across all tasks and categories"}),(0,a.jsx)("p",{className:"mt-2",children:"• Search by task title, code, or notes"}),(0,a.jsx)("p",{children:"• Press Enter to open first result"}),(0,a.jsx)("p",{children:"• Press ESC to close"})]})]})]})});return s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-gray-900 border-t border-gray-700 z-50",children:(0,a.jsxs)("div",{className:"flex justify-around items-center h-16",children:[o.map(s=>{let l=e===s.path;return(0,a.jsxs)("button",{onClick:()=>t.push(s.path),className:"flex flex-col items-center justify-center w-full h-full transition-colors ".concat(l?"text-yellow-400 bg-gray-800":"text-gray-400 hover:text-gray-200 hover:bg-gray-800"),children:[(0,a.jsx)("span",{className:"text-2xl font-mono font-bold",children:s.key}),(0,a.jsx)("span",{className:"text-xs mt-1",children:s.label}),l&&(0,a.jsx)("span",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-yellow-400"})]},s.key)}),(0,a.jsxs)("button",{onClick:()=>d(!0),className:"flex flex-col items-center justify-center w-full h-full text-gray-400 hover:text-gray-200 hover:bg-gray-800 transition-colors",children:[(0,a.jsx)("span",{className:"text-2xl font-mono font-bold",children:"S"}),(0,a.jsx)("span",{className:"text-xs mt-1",children:"Search"})]})]})}),(0,a.jsx)("div",{className:"h-16"})," ",(0,a.jsx)(b,{})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("nav",{className:"fixed left-0 top-0 h-full w-64 bg-gray-900 border-r border-gray-700 z-50",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-mono font-bold text-yellow-400",children:"ATOL_"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1 font-mono",children:"SEMANTIC LEDGER"})]}),(0,a.jsx)("div",{className:"space-y-2",children:o.map(s=>{let l=e===s.path;return(0,a.jsxs)("button",{onClick:()=>t.push(s.path),className:"w-full text-left px-4 py-3 rounded-lg transition-all font-mono ".concat(l?"bg-gradient-to-r from-blue-600 to-blue-700 text-white":"text-gray-400 hover:bg-gray-800 hover:text-white"),children:[l&&(0,a.jsx)("span",{className:"mr-2",children:">"}),(0,a.jsx)("span",{className:"font-bold text-yellow-400",children:s.key}),(0,a.jsx)("span",{className:"ml-1",children:s.label.slice(1)})]},s.key)})}),(0,a.jsx)("div",{className:"my-6 border-t border-gray-700"}),(0,a.jsxs)("button",{onClick:()=>d(!0),className:"w-full text-left px-4 py-3 rounded-lg text-gray-400 hover:bg-gray-800 hover:text-white transition-all font-mono",children:[(0,a.jsx)("span",{className:"font-bold text-yellow-400",children:"S"}),(0,a.jsx)("span",{className:"ml-1",children:"earch"}),(0,a.jsx)("span",{className:"float-right text-xs bg-gray-800 px-2 py-1 rounded",children:"ctrl+k"})]})]})}),(0,a.jsx)("div",{className:"w-64"})," ",(0,a.jsx)(b,{})]})}function c(e){let{children:t}=e;return(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(i,{}),(0,a.jsx)("main",{className:"flex-1",children:t})]})}},5922:function(e,t,s){"use strict";s.d(t,{O:function(){return a}});let a=(0,s(7887).eI)("https://ofiindxmfiptivijhbdi.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9maWluZHhtZmlwdGl2aWpoYmRpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgzOTU4MjEsImV4cCI6MjA3Mzk3MTgyMX0.P9Qmhha1EL7X0uQ8CiUF6LXWqBCQt1pJwg3cmcHkfR0")},7907:function(e,t,s){"use strict";var a=s(5313);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},2445:function(){}},function(e){e.O(0,[887,971,69,744],function(){return e(e.s=5255)}),_N_E=e.O()}]);